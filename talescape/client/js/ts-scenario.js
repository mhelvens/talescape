'use strict';

////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
define(['gmaps', 'angular', 'TS'], function (gmaps, angular) {
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////


//  ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
	angular.module('TS').directive('tsScenario', function () {
//  ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

		return {
			restrict  : 'E',
			template  : '<div ng-transclude></div>',
			replace   : true,
			scope     : {},
			transclude: true,
			require   : '^tsMap',


			// TODO: Fix; this becomes a sibling of the areas inside it, not a parent. Least surprise indeed...

			compile: function (element, attrs, controller) {
				return {
					pre : function (scope, element, attrs, controller) {
						scope.scenario = attrs['name'];

						controller.registerScenario(scope.scenario);

						// TODO: To support nested scenarios, use "scope: {scenario: '@'}"
						// TODO: and store a stack (array) in scope.scenario.
					},
					post: function () {}
				};
			}
		};

//  ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
	});
//  ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////


////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
});
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
